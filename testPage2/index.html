<!DOCTYPE html>
<html lang="ru">

  <head>
    <title>ТОП СПОРТС - Artboard</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="ТОП СПОРТС">
    <meta name="description" content="ТОП СПОРТС">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../js/check_auth.js"></script>
    <script src="../js/includeHTML.js"></script>
    <link rel="icon" href="../img/top_sports_logo_black_short_transparency.png">
    <link rel="stylesheet" type="text/css" href="../css/fonts.css">
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <link rel="stylesheet" type="text/css" href="../css/media_main.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" type="text/css" href="media_index.css">
  </head>

  <!-- Атрибуты в body -->
  <body data-website="ts_b2b" data-cart="true">

    <!-- Хедер -->
    <div data-src="../modules/header.html"></div>

    <!-- Основное содержимое страницы -->
    <div class="main">
      <div class="container">
       <!-- Заголовок страницы -->
        <div id="main-header" class="row">
          <div class="title h0">Тест includeJS</div>
        </div>
        <!-- Таблица -->
        <div class="title h1">Тест</div>
        <br>
        <div id="table2" class="table-wrap active"></div>
      </div>
    </div>

    <!-- Футер -->
    <div data-src="../modules/footer.html"></div>

    <!-- Общие модальные окна -->
    <div data-src="../modules/common_modals.html"></div>

    <script src="../js/main.js"></script>
    <script src="../js/table.js"></script>
    <script src="../js/calendar.js"></script>
    <script src="../js/test.js"></script>
    <script src="index.js"></script>
    <script>
      // Отображение всех незаполненных шаблонов, чтобы их можно было видеть в артборде:
      document.querySelectorAll('.template').forEach(el => el.classList.remove('template'));

      // Созание примера данных для второй таблицы и запуск ее инициализации:
      var data2 = [];
      for (var i = 0; i < 20; i++) {
        data2.push({
          access: 'checked',
          inn: '9731002289/637584',
          contr: 'ООО, Пилот' + (parseInt(i, 10) + 1),
          system: 'Упрощенная',
          date: '29.10.2016',
          address: '119331, г. Москва, просп. Вернадского, д. 29, этаж 12, пом. I, ком. 4',
          user: 'Семенов И.О.',
          docs: [{
            title: 'Договор с ООО «ТОП СПОРТС» от 31.10.2016',
            status: 'full',
            date_start: '29.10.2016',
            date_end: '04.12.2019',
            contr: 'ООО «ТОП СПОРТС»',
            url: 'bla-bla',
            status_info: 'действует',
            info: 'Договор от 31.10.2016<br>Дата завершения 04.12.2019<br>Заключен с ООО «ТОП СПОРТС»'
          },{
            title: 'Договор с ООО «ТОП СПОРТС-1» от 31.10.2017',
            status: 'disabled',
            date_start: '31.10.2017',
            contr: 'ООО «ТОП СПОРТС-1»',
            url: 'bla-bla',
            status_info: 'не действует',
            info: 'Договор от 31.10.2017<br>Заключен с ООО «ТОП СПОРТС»'
          }]
        });
        data2.push({
          access: '',
          inn: '97320002134/637554',
          contr: 'ООО, Магнолия' + (1 + i),
          system: 'Основная',
          date: '01.10.2018',
          address: '443035, г. Самара, просп. Ленина, д. 3, офис 59',
          user: 'Петров Б.Е.',
          docs: [{
            title: 'Договор с ООО «ТОП СПОРТС» от 15.05.2018',
            status: 'disabled',
            date_start: '31.10.2016',
            date_end: '04.12.2019',
            contr: 'ООО «ТОП СПОРТС»',
            url: 'bla-bla',
            status_info: 'не действует',
            info: 'Договор от 15.05.2018<br>Заключен с ООО «ТОП СПОРТС»'
          }]
        });
      }
      var settings = {
        data: data2,
        control: {
          pagination: true,
          search: 'Поиск...',
          setting: true
        },
        head: true,
        result: false,
        cols: [{
          key: 'access',
          title: 'Доступ',
          content: '<div class="toggle #access#" onclick="toggle(event)"><div class="toggle-in"></div></div>'
        }, {
          key: 'inn',
          title: 'ИНН/КПП',
          sort: 'text',
          filter: 'search'
        }, {
          key: 'contr',
          title: 'Контрагент',
          sort: 'text',
          filter: 'full'
        }, {
          key: 'system',
          title: 'Система налогообложения',
          sort: 'text',
          filter: 'full'
        }, {
          key: 'date',
          title: 'Дата заведения',
          sort: 'date',
          filter: 'search'
        }, {
          key: 'address',
          title: 'Юридический адрес',
          filter: 'search'
        }, {
          key: 'user',
          title: 'Пользователь',
          sort: 'text',
          filter: 'full'
        }, {
          key: 'docs',
          title: 'Документы',
          content: '<div class="docs row #status#"><div class="mark icon" data-tooltip="#status_info#"></div><a href="url" target="_blank" data-tooltip="#info#" text="left" help>#title#</a></div>'
        }],
        sub: [{area: '.docs', items: 'docs'}]
      }
      initTable('#table2', settings);
    </script>

  </body>
</html>
